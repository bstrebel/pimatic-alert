{
  "//": "Please only change this file when pimatic is NOT running, otherwise pimatic will overwrite your changes.",
  "settings": {
    "debug": true,
    "logLevel": "debug",
    "httpServer": {
      "enabled": true,
      "port": 8080
    },
    "httpsServer": {},
    "authentication": {
      "secret": "z6Isbqhg1CTbKVS7x8VhwLsguvE9Q3joej5HqzMxRljVsplW1sNhH0rfeAHPwJLc+XCGXS/IY78HgSMlvjgKuQ=="
    },
    "database": {
      "deviceAttributeLogging": [
        {
          "deviceId": "*",
          "attributeName": "*",
          "type": "*",
          "interval": "0",
          "expire": "7d"
        },
        {
          "deviceId": "*",
          "attributeName": "*",
          "type": "continuous",
          "interval": "5min",
          "expire": "7d"
        },
        {
          "deviceId": "*",
          "attributeName": "temperature",
          "type": "number",
          "expire": "1y"
        },
        {
          "deviceId": "*",
          "attributeName": "humidity",
          "type": "number",
          "expire": "1y"
        }
      ],
      "messageLogging": [
        {
          "level": "*",
          "tags": [],
          "expire": "7d"
        },
        {
          "level": "debug",
          "tags": [],
          "expire": "0"
        }
      ]
    },
    "cors": {
      "allowedOrigin": "*"
    },
    "gui": {}
  },
  "plugins": [
    {
      "plugin": "cron"
    },
    {
      "plugin": "mobile-frontend",
      "active": true
    },
    {
      "debug": true,
      "plugin": "alert",
      "active": true
    }
  ],
  "devices": [
    {
      "buttons": [
        {
          "id": "contact-close",
          "text": "close contact"
        },
        {
          "id": "contact-open",
          "text": "open contact"
        },
        {
          "id": "presence",
          "text": "trigger presence"
        }
      ],
      "id": "buttons-device",
      "name": "buttons device",
      "class": "ButtonsDevice"
    },
    {
      "id": "alert-remote",
      "name": "alert remote",
      "class": "DummySwitch"
    },
    {
      "id": "alert-alarm",
      "name": "Alert !!!",
      "class": "DummySwitch"
    },
    {
      "id": "prealert-alarm",
      "name": "Prealert !!!",
      "class": "DummySwitch"
    },
    {
      "id": "contact-sensor",
      "name": "contact sensor",
      "class": "DummyContactSensor"
    },
    {
      "autoReset": true,
      "resetTime": 10000,
      "id": "presence-sensor",
      "name": "presence sensor",
      "class": "DummyPresenceSensor"
    },
    {
      "id": "prealert",
      "name": "prealert system",
      "class": "AlertSystem",
      "sensors": [
        {
          "name": "presence-sensor",
          "required": false
        }
      ],
      "switches": [
        "prealert-alarm"
      ],
      "trigger": true,
      "alert": "prealert-switch",
      "state": "prealert-state"
    },
    {
      "id": "alert",
      "name": "alert system",
      "class": "AlertSystem",
      "sensors": [
        {
          "name": "contact-sensor",
          "required": true
        }
      ],
      "switches": [
        "alert-alarm"
      ],
      "remote": "alert-remote",
      "trigger": false,
      "alert": "alert-switch",
      "state": "alert-state"
    },
    {
      "id": "prealert-switch",
      "name": "prealert system switch",
      "class": "AlertSwitch"
    },
    {
      "id": "alert-switch",
      "name": "alert system switch",
      "class": "AlertSwitch"
    },
    {
      "id": "prealert-state",
      "name": "prealert system state",
      "class": "VariablesDevice",
      "variables": [
        {
          "name": "prealert-time",
          "expression": "$prealert-time"
        },
        {
          "name": "prealert-info",
          "expression": "$prealert-info"
        },
        {
          "name": "prealert-state",
          "expression": "$prealert-state"
        }
      ]
    },
    {
      "id": "alert-state",
      "name": "alert system state",
      "class": "VariablesDevice",
      "variables": [
        {
          "name": "alert-time",
          "expression": "$alert-time"
        },
        {
          "name": "alert-info",
          "expression": "$alert-info"
        },
        {
          "name": "alert-state",
          "expression": "$alert-state"
        }
      ]
    }
  ],
  "rules": [
    {
      "id": "presence-sensor",
      "name": "presence-sensor",
      "rule": "when presence is pressed then set presence of presence-sensor present",
      "active": true,
      "logging": false
    },
    {
      "id": "contact-open",
      "name": "contact-open",
      "rule": "when contact-open is pressed then open contact-sensor",
      "active": true,
      "logging": false
    },
    {
      "id": "contact-close",
      "name": "contact-close",
      "rule": "when contact-close is pressed then close contact-sensor",
      "active": true,
      "logging": false
    },
    {
      "id": "alert",
      "name": "alert",
      "rule": "when alert-switch is turned on then log \"alert triggerd by $alert-trigger at $alert-time\" and turn alert-switch off after 1 minute",
      "active": true,
      "logging": true
    }
  ],
  "pages": [
    {
      "id": "favourite",
      "name": "Favourites",
      "devices": [
        {
          "deviceId": "prealert"
        },
        {
          "deviceId": "prealert-alarm"
        },
        {
          "deviceId": "alert"
        },
        {
          "deviceId": "alert-remote"
        },
        {
          "deviceId": "alert-switch"
        },
        {
          "deviceId": "alert-alarm"
        },
        {
          "deviceId": "alert-state"
        },
        {
          "deviceId": "prealert-switch"
        },
        {
          "deviceId": "prealert-state"
        },
        {
          "deviceId": "contact-sensor"
        },
        {
          "deviceId": "presence-sensor"
        },
        {
          "deviceId": "buttons-device"
        }
      ]
    }
  ],
  "groups": [
    {
      "id": "prealert",
      "name": "prealert",
      "devices": [
        "prealert",
        "prealert-switch",
        "prealert-alarm",
        "prealert-state"
      ],
      "rules": [],
      "variables": []
    },
    {
      "id": "alert",
      "name": "alert",
      "devices": [
        "alert",
        "alert-switch",
        "alert-alarm",
        "alert-remote",
        "alert-state"
      ],
      "rules": [],
      "variables": []
    },
    {
      "id": "sensors",
      "name": "sensors",
      "devices": [
        "contact-sensor",
        "presence-sensor",
        "buttons-device"
      ],
      "rules": [],
      "variables": []
    }
  ],
  "users": [
    {
      "username": "admin",
      "password": "admin",
      "role": "admin"
    }
  ],
  "roles": [
    {
      "name": "admin",
      "permissions": {
        "pages": "write",
        "rules": "write",
        "variables": "write",
        "messages": "write",
        "events": "write",
        "devices": "write",
        "groups": "write",
        "plugins": "write",
        "updates": "write",
        "database": "write",
        "config": "write",
        "controlDevices": true,
        "restart": true
      }
    }
  ],
  "variables": []
}